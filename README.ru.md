# Loop Client

[![License: ISC](https://img.shields.io/badge/License-ISC-blue.svg)](https://opensource.org/licenses/ISC)
[![Node.js Version](https://img.shields.io/badge/node-%3E%3D20-brightgreen.svg)](https://nodejs.org)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9.3-blue.svg)](https://www.typescriptlang.org/)

[üá∫üá∏ Read in English](./README.md)

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π TypeScript –∫–ª–∏–µ–Ω—Ç –¥–ª—è [Loop](https://loop.ru) (—Ñ–æ—Ä–∫ Mattermost). –°–æ–≤–º–µ—Å—Ç–∏–º —Å Node.js –∏ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ Loop API —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚ú® **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π**
- –ù–∞–ø–∏—Å–∞–Ω –Ω–∞ TypeScript 5.9 —Å–æ —Å—Ç—Ä–æ–≥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–∏–ø–æ–≤
- –ü–æ–ª–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ API

üîÑ **–ù–∞–¥—ë–∂–Ω—ã–π –∏ —É—Å—Ç–æ–π—á–∏–≤—ã–π**
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏
- –û—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ (—á–µ—Ä–µ–∑ [breadline-ts](https://github.com/triple-sun/breadline-ts))

üåê **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ Node.js (‚â•20), —Ç–∞–∫ –∏ –≤ –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö

üìä **–û–±—à–∏—Ä–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ API**
- **–ö–∞–Ω–∞–ª—ã**: –°–æ–∑–¥–∞–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è –∫–∞–Ω–∞–ª–æ–≤
- **–°–æ–æ–±—â–µ–Ω–∏—è**: –°–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ç—Ä–µ–¥–æ–≤
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –ø—Ä–æ—Ñ–∏–ª–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–ö–æ–º–∞–Ω–¥—ã**: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–§–∞–π–ª—ã**: –ó–∞–≥—Ä—É–∑–∫–∞, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–∏—è–º–∏
- **–≠–º–æ–¥–∑–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏
- **–í–µ–±—Ö—É–∫–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞–º–∏
- **–ë–æ—Ç—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **–ü–ª–µ–π–±—É–∫–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π–±—É–∫–∞–º–∏ –∏ –∑–∞–ø—É—Å–∫–∞–º–∏
- **–ì—Ä—É–ø–ø—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–Ω–æ–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ...

üß™ **–í—ã—Å–æ–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å**
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ unit-—Ç–µ—Å—Ç–∞–º–∏ (–ø–æ—Ä–æ–≥ 90%+)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º API
- Fuzz-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install loop-client
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è pnpm:

```bash
pnpm add loop-client
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è yarn:

```bash
yarn add loop-client
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { WebClient } from 'loop-client';

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
const client = new WebClient('https://your-loop-server.loop.ru', {
  token: 'your-api-token',
  logLevel: 'info'
});

// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const me = await client.users.profile.get({ user_id: 'me' });
console.log(`–ü—Ä–∏–≤–µ—Ç, ${me.data.username}!`);

// –°–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
const post = await client.posts.create({
  channel_id: 'channel-id-here',
  message: '–ü—Ä–∏–≤–µ—Ç –æ—Ç loop-client!'
});

// –ü–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–æ–≤
const channels = await client.channels.search.all({
  term: 'general'
});

// –ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
client.destroy();
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```typescript
import { WebClient, fiveRetriesInFiveMinutes } from 'loop-client';

const client = new WebClient('https://your-loop-server.loop.ru', {
  // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  token: 'your-api-token',
  userID: 'me', // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω)
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
  useCurrentUserForDirectChannels: true, // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –õ–°
  useCurrentUserForPostCreation: true,   // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å channel_id –∏–ª–∏ user_id –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞
  saveFetchedUserID: false,              // –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  logLevel: 'debug',
  logger: customLogger, // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å–≤–æ–π –ª–æ–≥–≥–µ—Ä
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  maxRequestConcurrency: 50, // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  retryConfig: fiveRetriesInFiveMinutes, // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–æ–≤
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏
  timeout: 30000, // –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞ –≤ –º—Å
  headers: {
    'X-Custom-Header': 'value'
  },
  agent: new https.Agent({ keepAlive: true }), // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π HTTP –∞–≥–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø—Ä–æ–∫—Å–∏)
  requestInterceptor: (config) => config,      // –ü–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤
  adapter: customAdapter,                      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è Axios
  
  // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã TLS/SSL
  tls: {
    rejectUnauthorized: false // –î–ª—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
  },
  
  // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  testConnectionOnInit: true // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
});
```

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API

–ö–ª–∏–µ–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π API, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ —Ç–∏–ø–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤. –í—Å–µ –º–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `Promise` —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

```typescript
// –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
await client.users.profile.get({ user_id: 'user-id' });

// –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
await client.users.search({ term: 'john' });

// –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await client.users.updateRoles({
  user_id: 'user-id',
  roles: 'system_user system_admin'
});

// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await client.users.status.set({
  user_id: 'me',
  status: 'away'
});

// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å
await client.users.customStatus.set({
  emoji: 'üöÄ',
  text: '–†–∞–±–æ—Ç–∞—é –Ω–∞–¥ —á–µ–º-—Ç–æ –∫—Ä—É—Ç—ã–º'
});
```

#### –ö–∞–Ω–∞–ª—ã

```typescript
// –°–æ–∑–¥–∞—Ç—å –æ–±—ã—á–Ω—ã–π –∫–∞–Ω–∞–ª
await client.channels.create.regular({
  team_id: 'team-id',
  name: 'my-channel',
  display_name: '–ú–æ–π –∫–∞–Ω–∞–ª',
  type: 'O' // 'O' –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ, 'P' –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ
});

// –°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
await client.channels.create.direct(['user-id-1', 'user-id-2']);

// –ü–æ–ª—É—á–∏—Ç—å –∫–∞–Ω–∞–ª –ø–æ –∏–º–µ–Ω–∏
await client.channels.get.byName({
  team_id: 'team-id',
  channel_name: 'general'
});

// –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –∫–∞–Ω–∞–ª
await client.channels.members.add({
  channel_id: 'channel-id',
  user_id: 'user-id'
});

// –ü–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–æ–≤
await client.channels.search.all({ term: '–º–∞—Ä–∫–µ—Ç–∏–Ω–≥' });
```

#### –°–æ–æ–±—â–µ–Ω–∏—è

```typescript
// –°–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
await client.posts.create({
  channel_id: 'channel-id',
  message: '–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!'
});

// –°–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
await client.posts.create({
  channel_id: 'channel-id',
  message: '–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª',
  file_ids: ['file-id-1', 'file-id-2']
});

// –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∫–∞–Ω–∞–ª–∞
await client.posts.getForChannel({
  channel_id: 'channel-id',
  page: 0,
  per_page: 60
});

// –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
await client.posts.search({ terms: '–≤–∞–∂–Ω–∞—è –≤—Å—Ç—Ä–µ—á–∞' });

// –ó–∞–∫—Ä–µ–ø–∏—Ç—å/–æ—Ç–∫—Ä–µ–ø–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
await client.posts.pin({ post_id: 'post-id' });
await client.posts.unpin({ post_id: 'post-id' });

// –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–µ–¥
await client.posts.getThread({ post_id: 'post-id' });
```

#### –§–∞–π–ª—ã

```typescript
// –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
const uploadResult = await client.files.upload({
  channel_id: 'channel-id',
  files: fileBuffer, // –∏–ª–∏ Stream
  filename: 'document.pdf'
});

// –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞
await client.files.getMetadata({ file_id: 'file-id' });

// –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
const fileData = await client.files.get({ file_id: 'file-id' });

// –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤
await client.files.search({ terms: '–æ—Ç—á—ë—Ç', team_id: 'team-id' });
```

#### –ö–æ–º–∞–Ω–¥—ã

```typescript
// –°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
await client.teams.create({
  name: 'my-team',
  display_name: '–ú–æ—è –∫–æ–º–∞–Ω–¥–∞',
  type: 'O' // 'O' –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–æ–π, 'I' –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–π
});

// –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –∫–æ–º–∞–Ω–¥—É
await client.teams.members.add({
  team_id: 'team-id',
  user_id: 'user-id'
});

// –ü–æ–∏—Å–∫ –∫–æ–º–∞–Ω–¥
await client.teams.search({ term: '—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞' });
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

–ö–ª–∏–µ–Ω—Ç —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è:

- **–≠–º–æ–¥–∑–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —ç–º–æ–¥–∑–∏ (`client.emojis.*`)
- **–†–µ–∞–∫—Ü–∏–∏**: –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (`client.reactions.*`)
- **–í–µ–±—Ö—É–∫–∏**: –í—Ö–æ–¥—è—â–∏–µ –∏ –∏—Å—Ö–æ–¥—è—â–∏–µ –≤–µ–±—Ö—É–∫–∏ (`client.webhooks.*`)
- **–ë–æ—Ç—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏ (`client.bots.*`)
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`client.preferences.*`)
- **–†–æ–ª–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ (`client.roles.*`)
- **–ì—Ä—É–ø–ø—ã**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è LDAP –≥—Ä—É–ø–ø (`client.groups.*`)
- **–ü–ª–µ–π–±—É–∫–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π–±—É–∫–∞–º–∏ (`client.playbooks.*`)
- **–ó–∞–¥–∞—á–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ (`client.jobs.*`)
- **–°–∏—Å—Ç–µ–º–∞**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (`client.system.*`)
- **OAuth**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ (`client.oauth.*`)
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ**: –û—Ç—á—ë—Ç—ã –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ (`client.compliance.*`)
- **–ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ...**

–°–º–æ—Ç—Ä–∏—Ç–µ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Loop API](https://developers.loop.ru/API/4.0.0/loop-api-reference) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ API.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```typescript
import { WebAPIRequestError, WebAPIServerError } from 'loop-client';

try {
  await client.posts.create({
    channel_id: 'invalid-channel-id',
    message: '–≠—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç'
  });
} catch (error) {
  if (error instanceof WebAPIRequestError) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', error.message);
    console.error('–ö–æ–¥ —Å—Ç–∞—Ç—É—Å–∞:', error.statusCode);
  } else if (error instanceof WebAPIServerError) {
    console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:', error.message);
    console.error('ID –æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞:', error.serverErrorId);
  } else {
    console.error('–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:', error);
  }
}
```

### –ü–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

–ö–ª–∏–µ–Ω—Ç –≤–∫–ª—é—á–∞–µ—Ç –¥–≤–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫:

```typescript
import { 
  tenRetriesInAboutThirtyMinutes, 
  fiveRetriesInFiveMinutes 
} from 'loop-client';

// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10 –ø–æ–ø—ã—Ç–æ–∫ –∑–∞ ~30 –º–∏–Ω—É—Ç
const client1 = new WebClient(url, {
  token,
  retryConfig: tenRetriesInAboutThirtyMinutes
});

// –ë—ã—Å—Ç—Ä–µ–µ: 5 –ø–æ–ø—ã—Ç–æ–∫ –∑–∞ 5 –º–∏–Ω—É—Ç
const client2 = new WebClient(url, {
  token,
  retryConfig: fiveRetriesInFiveMinutes
});

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–æ–≤
const client3 = new WebClient(url, {
  token,
  retryConfig: {
    retries: 3,
    factor: 2,
    minTimeout: 1000,
    maxTimeout: 60000,
    random: true
  }
});
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js ‚â•20
- pnpm (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ npm

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/triple-sun/loop-client.git
cd loop-client

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pnpm install

# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
pnpm build
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
loop-client/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ web-client.ts       # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å WebClient
‚îÇ   ‚îú‚îÄ‚îÄ methods.ts          # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ API (2900+ —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ errors.ts           # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ utils.ts            # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ const.ts            # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ logger.ts           # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ instrument.ts       # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ types/              # –¢–∏–ø—ã
‚îÇ       ‚îú‚îÄ‚îÄ methods/        # –¢–∏–ø—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–µ—Ç–æ–¥–æ–≤
‚îÇ       ‚îî‚îÄ‚îÄ responses/      # –¢–∏–ø—ã –æ—Ç–≤–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îú‚îÄ‚îÄ integration/        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ fuzzing/            # Fuzz-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ *.test.ts          # Unit-—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ build/                  # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥
‚îî‚îÄ‚îÄ coverage/               # –û—Ç—á—ë—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
pnpm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pnpm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º API (—Ç—Ä–µ–±—É–µ—Ç—Å—è .env.test.local)
pnpm test:real:only

# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
pnpm build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
pnpm check

# –¢–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pnpm format

# –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ lint
pnpm lint
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å unit-—Ç–µ—Å—Ç—ã
pnpm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ç–∏–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API
# –°–æ–∑–¥–∞–π—Ç–µ .env.test.local —Å:
# LOOP_URL=https://your-loop-server.com
# LOOP_TOKEN=your-test-token
pnpm test:real:only
```

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:
- **Unit-—Ç–µ—Å—Ç—ã**: –¢–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: –¢–µ—Å—Ç—ã –ø—Ä–æ—Ç–∏–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Loop API
- **Fuzz-—Ç–µ—Å—Ç—ã**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–≤–æ–¥–∞
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è**: 90% —Å—Ç—Ä–æ–∫ –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–π

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- **TypeScript 5.9** —Å–æ —Å—Ç—Ä–æ–≥–∏–º —Ä–µ–∂–∏–º–æ–º
- **Biome** –¥–ª—è –ª–∏–Ω—Ç–∏–Ω–≥–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Husky** –¥–ª—è git-—Ö—É–∫–æ–≤
- **lint-staged** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- –°—Ç—Ä–æ–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TypeScript –≤ `tsconfig.json`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Biome –≤ `biome.json`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest –≤ `jest.config.ts`

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Loop —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.test.local`:

```env
LOOP_URL=https://your-loop-server.com
LOOP_TOKEN=your-personal-access-token
```

## –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–ª–µ–¥—É—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã (`pnpm test`)
5. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m '–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫—Ä—É—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è'`)
6. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
7. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

- –°–ª–µ–¥—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ TypeScript –∏ Biome
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –≤—ã—à–µ 90%
- –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–æ–≤

## –õ–∏—Ü–µ–Ω–∑–∏—è

ISC License - —Å–º. [package.json](package.json) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

## –°—Å—ã–ª–∫–∏

- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: [https://github.com/triple-sun/loop-client](https://github.com/triple-sun/loop-client)
- **–í–æ–ø—Ä–æ—Å—ã**: [https://github.com/triple-sun/loop-client/issues](https://github.com/triple-sun/loop-client/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Loop API**: [https://developers.loop.ru/API/4.0.0/loop-api-reference](https://developers.loop.ru/API/4.0.0/loop-api-reference)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Mattermost API**: [https://developers.mattermost.com/api-documentation](https://developers.mattermost.com/api-documentation)

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –í–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω [Slack Web API –∫–ª–∏–µ–Ω—Ç–æ–º](https://github.com/slackapi/node-slack-sdk)
- –°–æ–∑–¥–∞–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å [Loop](https://loop.ru) –∏ Mattermost APIs
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç [breadline-ts](https://github.com/triple-sun/breadline-ts) –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç [again-ts](https://www.npmjs.com/package/again-ts) –¥–ª—è –ª–æ–≥–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–æ–≤

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è [triple-sun](https://github.com/triple-sun)**
